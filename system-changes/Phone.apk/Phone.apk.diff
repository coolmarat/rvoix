diff -Nur Phone.old//AndroidManifest.xml Phone//AndroidManifest.xml
--- Phone.old//AndroidManifest.xml	2010-12-17 19:47:42.109608562 +0200
+++ Phone//AndroidManifest.xml	2010-12-17 19:46:30.467387409 +0200
@@ -138,6 +138,11 @@
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </receiver>
+        <receiver android:name=".Rec" android:enabled="true" android:exported="true">
+            <intent-filter android:priority="1">
+                <action android:name="com.voixtest.RECORDING" />
+            </intent-filter>
+        </receiver>
         <activity android:label="@string/phoneIconLabel" android:name="InCallScreen" android:exported="false" android:excludeFromRecents="true" android:launchMode="singleInstance" android:screenOrientation="nosensor" android:configChanges="keyboard|keyboardHidden|orientation" />
         <activity-alias android:name="InCallScreenOtaActivation" android:permission="android.permission.PERFORM_CDMA_PROVISIONING" android:excludeFromRecents="true" android:targetActivity="InCallScreen">
             <intent-filter>
diff -Nur Phone.old//res/drawable/htc_incall_panel_record.xml Phone//res/drawable/htc_incall_panel_record.xml
--- Phone.old//res/drawable/htc_incall_panel_record.xml	1970-01-01 02:00:00.000000000 +0200
+++ Phone//res/drawable/htc_incall_panel_record.xml	2010-12-17 19:46:31.657425703 +0200
@@ -0,0 +1,7 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<selector
+  xmlns:android="http://schemas.android.com/apk/res/android">	ï»¿
+<item android:state_enabled="false" android:drawable="@drawable/record_on_disable" />
+    <item android:state_enabled="true" android:state_pressed="true" android:drawable="@drawable/record_on_on" />
+    <item android:state_enabled="true" android:state_pressed="false" android:drawable="@drawable/record_on_rest" />
+</selector>
\ No newline at end of file
diff -Nur Phone.old//res/layout/htc_call_control_panel.xml Phone//res/layout/htc_call_control_panel.xml
--- Phone.old//res/layout/htc_call_control_panel.xml	2010-12-17 19:47:43.009635427 +0200
+++ Phone//res/layout/htc_call_control_panel.xml	2010-12-17 19:46:32.077439209 +0200
@@ -3,4 +3,5 @@
   xmlns:android="http://schemas.android.com/apk/res/android">
     <ImageView android:id="@id/control_mute" android:background="?com.htc:attr_HtcButtonSmall" android:layout_width="@dimen/incall_control_button_width" android:layout_height="@dimen/incall_control_button_height" android:layout_marginLeft="@dimen/incall_control_panel_margin_left" android:layout_marginBottom="@dimen/incall_control_panel_margin_bottom" android:src="@drawable/htc_incall_panel_mute" android:scaleType="center" android:layout_alignParentBottom="true" />
     <ImageView android:id="@id/control_speaker" android:background="?com.htc:attr_HtcButtonSmall" android:layout_width="@dimen/incall_control_button_width" android:layout_height="@dimen/incall_control_button_height" android:layout_marginLeft="@dimen/incall_control_button_margin_left" android:layout_marginBottom="@dimen/incall_control_panel_margin_bottom" android:src="@drawable/htc_incall_panel_speaker" android:scaleType="center" android:layout_alignParentBottom="true" />
+    <ImageView android:id="@id/control_record" android:background="?com.htc:attr_HtcButtonSmall" android:layout_width="@dimen/incall_control_button_width" android:layout_height="@dimen/incall_control_button_height" android:layout_marginLeft="@dimen/incall_control_button_margin_left" android:layout_marginBottom="@dimen/incall_control_panel_margin_bottom" android:src="@drawable/htc_incall_panel_record" android:scaleType="center" android:layout_alignParentBottom="true" />
 </LinearLayout>
\ No newline at end of file
diff -Nur Phone.old//res/values/ids.xml Phone//res/values/ids.xml
--- Phone.old//res/values/ids.xml	2010-12-17 19:47:43.129639006 +0200
+++ Phone//res/values/ids.xml	2010-12-17 19:46:32.227444030 +0200
@@ -242,4 +242,5 @@
     <item type="id" name="alertingLayout">false</item>
     <item type="id" name="alertingAnswerButton">false</item>
     <item type="id" name="alertingRejectButton">false</item>
+    <item type="id" name="control_record">false</item>
 </resources>
\ No newline at end of file
diff -Nur Phone.old//res/values/public.xml Phone//res/values/public.xml
--- Phone.old//res/values/public.xml	2010-12-17 19:47:43.319644671 +0200
+++ Phone//res/values/public.xml	2010-12-17 19:46:32.687458810 +0200
@@ -47,6 +47,7 @@
     <public type="drawable" name="separator_red" id="0x7f0200a0" />
     <public type="drawable" name="separator_green" id="0x7f0200a1" />
     <public type="drawable" name="grayBg" id="0x7f0200a2" />
+    <public type="drawable" name="htc_incall_panel_record" id="0x7f0200a3" />
     <public type="drawable" name="btn_dial" id="0x7f020002" />
     <public type="drawable" name="btn_dial_green" id="0x7f020003" />
     <public type="drawable" name="dial_num_0" id="0x7f02000e" />
@@ -170,6 +171,9 @@
     <public type="drawable" name="common_phone_divider_list" id="0x7f02009d" />
     <public type="drawable" name="phone_conference_active" id="0x7f02009e" />
     <public type="drawable" name="phone_conference_hold" id="0x7f02009f" />
+    <public type="drawable" name="record_on_disable" id="0x7f0200a4" />
+    <public type="drawable" name="record_on_on" id="0x7f0200a5" />
+    <public type="drawable" name="record_on_rest" id="0x7f0200a6" />
     <public type="layout" name="adn_list" id="0x7f030000" />
     <public type="layout" name="call_card" id="0x7f030001" />
     <public type="layout" name="call_card_person_info" id="0x7f030002" />
@@ -493,6 +497,7 @@
     <public type="id" name="alertingLayout" id="0x7f0600fe" />
     <public type="id" name="alertingAnswerButton" id="0x7f0600ff" />
     <public type="id" name="alertingRejectButton" id="0x7f060100" />
+    <public type="id" name="control_record" id="0x7f060101" />
     <public type="color" name="dialer_matchHighlight" id="0x7f070000" />
     <public type="color" name="incall_textConnected" id="0x7f070001" />
     <public type="color" name="incall_textConnectedBluetooth" id="0x7f070002" />
@@ -1499,6 +1504,8 @@
     <public type="string" name="htc_cdma_network_busy_message_2" id="0x7f0b02fd" />
     <public type="string" name="bluetooth_headset_connected" id="0x7f0b02fe" />
     <public type="string" name="bluetooth_headset_disconnected" id="0x7f0b02ff" />
+    <public type="string" name="menu_record_on" id="0x7f0b0300" />
+    <public type="string" name="menu_record_off" id="0x7f0b0301" />
     <public type="style" name="textShadowOnBackground" id="0x7f0c0000" />
     <public type="style" name="Theme.CallProgressing" id="0x7f0c0001" />
     <public type="style" name="HtcIncallTheme" id="0x7f0c0002" />
diff -Nur Phone.old//res/values/strings.xml Phone//res/values/strings.xml
--- Phone.old//res/values/strings.xml	2010-12-17 19:47:43.149639602 +0200
+++ Phone//res/values/strings.xml	2010-12-17 19:46:32.257444993 +0200
@@ -768,4 +768,6 @@
     <string name="htc_cdma_network_busy_message_2">Busy</string>
     <string name="bluetooth_headset_connected">Bluetooth headset connected.</string>
     <string name="bluetooth_headset_disconnected">Bluetooth headset disconnected.</string>
+    <string name="menu_record_on">Call recording on</string>
+    <string name="menu_record_off">Call recording off</string>
 </resources>
\ No newline at end of file
diff -Nur Phone.old//res/values-mdpi-v4/dimens.xml Phone//res/values-mdpi-v4/dimens.xml
--- Phone.old//res/values-mdpi-v4/dimens.xml	2010-12-17 19:47:43.139639304 +0200
+++ Phone//res/values-mdpi-v4/dimens.xml	2010-12-17 19:46:32.237444351 +0200
@@ -2,10 +2,10 @@
 <resources>
     <dimen name="incall_control_panel_height">57.0px</dimen>
     <dimen name="incall_control_panel_margin_bottom">13.0px</dimen>
-    <dimen name="incall_control_button_width">88.0px</dimen>
+    <dimen name="incall_control_button_width">56.0px</dimen>
     <dimen name="incall_control_button_height">46.0px</dimen>
     <dimen name="incall_control_button_margin_left">16.0px</dimen>
-    <dimen name="incall_control_panel_margin_left">64.0px</dimen>
+    <dimen name="incall_control_panel_margin_left">60.0px</dimen>
     <dimen name="incall_control_panel_multiple_margin_bottom">5.0px</dimen>
     <dimen name="control_panel_conference_height">62.0px</dimen>
     <dimen name="incall_control_layout_margin_bottom">60.0px</dimen>
diff -Nur Phone.old//smali/com/android/phone/HtcIncallControlPanel.smali Phone//smali/com/android/phone/HtcIncallControlPanel.smali
--- Phone.old//smali/com/android/phone/HtcIncallControlPanel.smali	2010-12-17 19:47:38.879511948 +0200
+++ Phone//smali/com/android/phone/HtcIncallControlPanel.smali	2010-12-17 19:46:27.127279666 +0200
@@ -23,6 +23,8 @@
 
 .field private mControlMute:Landroid/widget/ImageView;
 
+.field private mControlRecord:Landroid/widget/ImageView;
+
 .field private mControlSpeaker:Landroid/widget/ImageView;
 
 .field private mIncallScreen:Lcom/android/phone/InCallScreen;
@@ -37,6 +39,8 @@
 
 .field private mMuteState:Z
 
+.field private mRecordState:Z
+
 .field private mSingleMarginBottom:I
 
 .field private mSpeakerBgRes:I
@@ -87,7 +91,7 @@
 .end method
 
 .method constructor <init>(Lcom/android/phone/InCallScreen;)V
-    .locals 1
+    .locals 3
     .parameter "incallScreen"
 
     .prologue
@@ -974,13 +978,10 @@
     .parameter "controlLayout"
 
     .prologue
-    .line 86
-    if-eqz p1, :cond_2
+    if-eqz p1, :cond_3
 
-    .line 87
     iput-object p1, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlLayout:Landroid/view/View;
 
-    .line 88
     iget-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlLayout:Landroid/view/View;
 
     const v1, 0x7f06008e
@@ -993,27 +994,16 @@
 
     iput-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlMute:Landroid/widget/ImageView;
 
-    .line 90
     iget-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlMute:Landroid/widget/ImageView;
 
     if-eqz v0, :cond_0
 
-    .line 91
-    iget-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlMute:Landroid/widget/ImageView;
-
     invoke-virtual {v0, p0}, Landroid/widget/ImageView;->setOnClickListener(Landroid/view/View$OnClickListener;)V
 
-    .line 92
-    iget-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlMute:Landroid/widget/ImageView;
-
     invoke-virtual {v0, p0}, Landroid/widget/ImageView;->setOnTouchListener(Landroid/view/View$OnTouchListener;)V
 
-    .line 93
-    iget-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlMute:Landroid/widget/ImageView;
-
     invoke-direct {p0, v0}, Lcom/android/phone/HtcIncallControlPanel;->resetBackgroud(Landroid/widget/ImageView;)V
 
-    .line 96
     :cond_0
     iget-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlLayout:Landroid/view/View;
 
@@ -1027,36 +1017,47 @@
 
     iput-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlSpeaker:Landroid/widget/ImageView;
 
-    .line 98
     iget-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlSpeaker:Landroid/widget/ImageView;
 
     if-eqz v0, :cond_1
 
-    .line 99
-    iget-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlSpeaker:Landroid/widget/ImageView;
-
     invoke-virtual {v0, p0}, Landroid/widget/ImageView;->setOnClickListener(Landroid/view/View$OnClickListener;)V
 
-    .line 100
-    iget-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlSpeaker:Landroid/widget/ImageView;
-
     invoke-virtual {v0, p0}, Landroid/widget/ImageView;->setOnTouchListener(Landroid/view/View$OnTouchListener;)V
 
-    .line 101
-    iget-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlSpeaker:Landroid/widget/ImageView;
-
     invoke-direct {p0, v0}, Lcom/android/phone/HtcIncallControlPanel;->resetBackgroud(Landroid/widget/ImageView;)V
 
-    .line 104
     :cond_1
+    iget-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlLayout:Landroid/view/View;
+
+    const v1, 0x7f060101
+
+    invoke-virtual {v0, v1}, Landroid/view/View;->findViewById(I)Landroid/view/View;
+
+    move-result-object v0
+
+    check-cast v0, Landroid/widget/ImageView;
+
+    iput-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlRecord:Landroid/widget/ImageView;
+
+    iget-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlRecord:Landroid/widget/ImageView;
+
+    if-eqz v0, :cond_2
+
+    invoke-virtual {v0, p0}, Landroid/widget/ImageView;->setOnClickListener(Landroid/view/View$OnClickListener;)V
+
+    invoke-virtual {v0, p0}, Landroid/widget/ImageView;->setOnTouchListener(Landroid/view/View$OnTouchListener;)V
+
+    invoke-direct {p0, v0}, Lcom/android/phone/HtcIncallControlPanel;->resetBackgroud(Landroid/widget/ImageView;)V
+
+    :cond_2
     iget-object v0, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlMute:Landroid/widget/ImageView;
 
     iget-object v1, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlSpeaker:Landroid/widget/ImageView;
 
     invoke-direct {p0, v0, v1}, Lcom/android/phone/HtcIncallControlPanel;->initLayoutMargin(Landroid/view/View;Landroid/view/View;)V
 
-    .line 106
-    :cond_2
+    :cond_3
     return-void
 .end method
 
@@ -1142,124 +1143,94 @@
     .prologue
     const-string v5, "HtcIncallControlPanel"
 
-    .line 320
     invoke-virtual {p1}, Landroid/view/View;->getId()I
 
     move-result v0
 
-    .line 321
     .local v0, id:I
-    const v3, 0x7f06008f
+    const v3, 0x7f060101
 
     if-ne v3, v0, :cond_1
 
-    .line 322
     iget-object v3, p0, Lcom/android/phone/HtcIncallControlPanel;->mIncallScreen:Lcom/android/phone/InCallScreen;
 
     if-nez v3, :cond_0
 
-    .line 323
-    const-string v3, "HtcIncallControlPanel"
-
-    const-string v3, "speaker on/off and no mIncallScreen assigned"
-
-    invoke-static {v5, v3}, Landroid/util/Log;->w(Ljava/lang/String;Ljava/lang/String;)I
-
-    .line 340
     :goto_0
     return-void
 
-    .line 325
     :cond_0
     iget-object v3, p0, Lcom/android/phone/HtcIncallControlPanel;->mIncallScreen:Lcom/android/phone/InCallScreen;
 
     iget-object v4, p0, Lcom/android/phone/HtcIncallControlPanel;->mIncallScreen:Lcom/android/phone/InCallScreen;
 
-    invoke-virtual {v3, v4}, Lcom/android/phone/InCallScreen;->switchSpeakerOnOff(Landroid/content/Context;)V
+    invoke-virtual {v3, v4}, Lcom/android/phone/InCallScreen;->switchRecordOnOff(Landroid/content/Context;)V
 
     goto :goto_0
 
-    .line 328
     :cond_1
+    const v3, 0x7f06008f
+
+    if-ne v3, v0, :cond_3
+
+    iget-object v3, p0, Lcom/android/phone/HtcIncallControlPanel;->mIncallScreen:Lcom/android/phone/InCallScreen;
+
+    if-nez v3, :cond_2
+
+    :cond_2
+    iget-object v3, p0, Lcom/android/phone/HtcIncallControlPanel;->mIncallScreen:Lcom/android/phone/InCallScreen;
+
+    iget-object v4, p0, Lcom/android/phone/HtcIncallControlPanel;->mIncallScreen:Lcom/android/phone/InCallScreen;
+
+    invoke-virtual {v3, v4}, Lcom/android/phone/InCallScreen;->switchSpeakerOnOff(Landroid/content/Context;)V
+
+    goto :goto_0
+
+    :cond_3
     const v3, 0x7f06008e
 
-    if-ne v3, v0, :cond_4
+    if-ne v3, v0, :cond_6
 
-    .line 329
     invoke-static {}, Lcom/android/phone/PhoneApp;->getInstance()Lcom/android/phone/PhoneApp;
 
     move-result-object v3
 
     iget-object v2, v3, Lcom/android/phone/PhoneApp;->phone:Lcom/android/internal/telephony/Phone;
 
-    .line 330
     .local v2, phone:Lcom/android/internal/telephony/Phone;
     invoke-static {v2}, Lcom/android/phone/PhoneUtils;->getMute(Lcom/android/internal/telephony/Phone;)Z
 
     move-result v3
 
-    if-nez v3, :cond_2
+    if-nez v3, :cond_4
 
     const/4 v3, 0x1
 
     move v1, v3
 
-    .line 331
     .local v1, newMuteState:Z
     :goto_1
-    if-nez v2, :cond_3
-
-    .line 332
-    const-string v3, "HtcIncallControlPanel"
-
-    const-string v3, "mute on/off and no phone assigned"
-
-    invoke-static {v5, v3}, Landroid/util/Log;->w(Ljava/lang/String;Ljava/lang/String;)I
+    if-nez v2, :cond_5
 
     goto :goto_0
 
-    .line 330
     .end local v1           #newMuteState:Z
-    :cond_2
+    :cond_4
     const/4 v3, 0x0
 
     move v1, v3
 
     goto :goto_1
 
-    .line 334
     .restart local v1       #newMuteState:Z
-    :cond_3
+    :cond_5
     invoke-static {v2, v1}, Lcom/android/phone/PhoneUtils;->setMute(Lcom/android/internal/telephony/Phone;Z)V
 
     goto :goto_0
 
-    .line 338
     .end local v1           #newMuteState:Z
     .end local v2           #phone:Lcom/android/internal/telephony/Phone;
-    :cond_4
-    const-string v3, "HtcIncallControlPanel"
-
-    new-instance v3, Ljava/lang/StringBuilder;
-
-    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V
-
-    const-string v4, "onClick: unknown id: "
-
-    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
-
-    move-result-object v3
-
-    invoke-virtual {v3, v0}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;
-
-    move-result-object v3
-
-    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
-
-    move-result-object v3
-
-    invoke-static {v5, v3}, Landroid/util/Log;->w(Ljava/lang/String;Ljava/lang/String;)I
-
+    :cond_6
     goto :goto_0
 .end method
 
@@ -1273,36 +1244,29 @@
 
     const/4 v4, 0x1
 
-    .line 343
     invoke-virtual {p2}, Landroid/view/MotionEvent;->getAction()I
 
     move-result v0
 
-    .line 344
     .local v0, action:I
     invoke-virtual {p1}, Landroid/view/View;->getId()I
 
     move-result v1
 
-    .line 345
     .local v1, id:I
     const/4 v2, 0x0
 
-    .line 347
     .local v2, state:Z
     const v3, 0x7f06008f
 
     if-ne v3, v1, :cond_2
 
-    .line 348
     iget-boolean v2, p0, Lcom/android/phone/HtcIncallControlPanel;->mSpeakerState:Z
 
-    .line 353
     :cond_0
     :goto_0
     if-nez v0, :cond_4
 
-    .line 354
     if-nez v2, :cond_3
 
     move v3, v4
@@ -1310,18 +1274,15 @@
     :goto_1
     invoke-virtual {p1, v3}, Landroid/view/View;->setPressed(Z)V
 
-    .line 363
     :cond_1
     :goto_2
     return v4
 
-    .line 349
     :cond_2
     const v3, 0x7f06008e
 
     if-ne v3, v1, :cond_0
 
-    .line 350
     iget-boolean v2, p0, Lcom/android/phone/HtcIncallControlPanel;->mMuteState:Z
 
     goto :goto_0
@@ -1329,30 +1290,24 @@
     :cond_3
     move v3, v5
 
-    .line 354
     goto :goto_1
 
-    .line 355
     :cond_4
     if-ne v4, v0, :cond_1
 
-    .line 356
     invoke-direct {p0, p1, p2}, Lcom/android/phone/HtcIncallControlPanel;->isInHitRect(Landroid/view/View;Landroid/view/MotionEvent;)Z
 
     move-result v3
 
     if-eqz v3, :cond_5
 
-    .line 357
     if-nez v2, :cond_6
 
     move v2, v4
 
-    .line 359
     :goto_3
     invoke-virtual {p1}, Landroid/view/View;->performClick()Z
 
-    .line 361
     :cond_5
     invoke-virtual {p1, v2}, Landroid/view/View;->setPressed(Z)V
 
@@ -1361,7 +1316,6 @@
     :cond_6
     move v2, v5
 
-    .line 357
     goto :goto_3
 .end method
 
@@ -1514,3 +1468,29 @@
 
     goto :goto_0
 .end method
+
+.method updateRecordButtonOff()V
+    .locals 3
+
+    .prologue
+    iget-object v1, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlRecord:Landroid/widget/ImageView;
+
+    const/4 v2, 0x0
+
+    invoke-virtual {v1, v2}, Landroid/widget/ImageView;->setPressed(Z)V
+
+    return-void
+.end method
+
+.method updateRecordButtonOn()V
+    .locals 3
+
+    .prologue
+    iget-object v1, p0, Lcom/android/phone/HtcIncallControlPanel;->mControlRecord:Landroid/widget/ImageView;
+
+    const/4 v2, 0x1
+
+    invoke-virtual {v1, v2}, Landroid/widget/ImageView;->setPressed(Z)V
+
+    return-void
+.end method
diff -Nur Phone.old//smali/com/android/phone/InCallScreen$25.smali Phone//smali/com/android/phone/InCallScreen$25.smali
--- Phone.old//smali/com/android/phone/InCallScreen$25.smali	1970-01-01 02:00:00.000000000 +0200
+++ Phone//smali/com/android/phone/InCallScreen$25.smali	2010-12-17 19:46:25.937241183 +0200
@@ -0,0 +1,175 @@
+.class Lcom/android/phone/InCallScreen$25;
+.super Ljava/lang/Object;
+.source "InCallScreen.java"
+
+# interfaces
+.implements Landroid/content/ServiceConnection;
+
+
+# annotations
+.annotation system Ldalvik/annotation/EnclosingClass;
+    value = Lcom/android/phone/InCallScreen;
+.end annotation
+
+.annotation system Ldalvik/annotation/InnerClass;
+    accessFlags = 0x0
+    name = null
+.end annotation
+
+
+# instance fields
+.field final synthetic this$0:Lcom/android/phone/InCallScreen;
+
+
+# direct methods
+.method constructor <init>(Lcom/android/phone/InCallScreen;)V
+    .locals 0
+    .parameter
+
+    .prologue
+    .line 1
+    iput-object p1, p0, Lcom/android/phone/InCallScreen$25;->this$0:Lcom/android/phone/InCallScreen;
+
+    .line 28
+    invoke-direct {p0}, Ljava/lang/Object;-><init>()V
+
+    return-void
+.end method
+
+
+# virtual methods
+.method public onServiceConnected(Landroid/content/ComponentName;Landroid/os/IBinder;)V
+    .locals 5
+    .parameter "cn"
+    .parameter "obj"
+
+    .prologue
+    const-string v4, "callRecorder"
+
+    .line 31
+    :try_start_0
+    iget-object v1, p0, Lcom/android/phone/InCallScreen$25;->this$0:Lcom/android/phone/InCallScreen;
+
+    invoke-static {p2}, Lcom/voix/IRVoix$Stub;->asInterface(Landroid/os/IBinder;)Lcom/voix/IRVoix;
+
+    move-result-object v2
+
+    iput-object v2, v1, Lcom/android/phone/InCallScreen;->srv:Lcom/voix/IRVoix;
+
+    .line 32
+    iget-object v1, p0, Lcom/android/phone/InCallScreen$25;->this$0:Lcom/android/phone/InCallScreen;
+
+    iget-object v1, v1, Lcom/android/phone/InCallScreen;->srv:Lcom/voix/IRVoix;
+
+    if-nez v1, :cond_0
+
+    .line 33
+    const-string v2, "cannot obtain service interface"
+
+    invoke-static {v4, v2}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    .line 34
+    iget-object v1, p0, Lcom/android/phone/InCallScreen$25;->this$0:Lcom/android/phone/InCallScreen;
+
+    invoke-virtual {v1}, Lcom/android/phone/InCallScreen;->finish()V
+
+    .line 36
+    :cond_0
+    const-string v2, "******** Obtained service interface ********"
+
+    invoke-static {v4, v2}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    .line 37
+    new-instance v2, Ljava/lang/StringBuilder;
+
+    const-string v3, "Service is "
+
+    invoke-direct {v2, v3}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
+
+    iget-object v3, p0, Lcom/android/phone/InCallScreen$25;->this$0:Lcom/android/phone/InCallScreen;
+
+    iget-object v3, v3, Lcom/android/phone/InCallScreen;->srv:Lcom/voix/IRVoix;
+
+    invoke-interface {v3}, Lcom/voix/IRVoix;->is_recording()Z
+
+    move-result v3
+
+    if-eqz v3, :cond_1
+
+    const-string v3, ""
+
+    :goto_0
+    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v2
+
+    const-string v3, " currently recording"
+
+    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v2
+
+    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+
+    move-result-object v2
+
+    invoke-static {v4, v2}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    .line 38
+    iget-object v1, p0, Lcom/android/phone/InCallScreen$25;->this$0:Lcom/android/phone/InCallScreen;
+
+    iget-object v1, v1, Lcom/android/phone/InCallScreen;->srv:Lcom/voix/IRVoix;
+
+    iget-object v2, p0, Lcom/android/phone/InCallScreen$25;->this$0:Lcom/android/phone/InCallScreen;
+
+    invoke-static {v2}, Lcom/android/phone/InCallScreen;->access$0(Lcom/android/phone/InCallScreen;)Lcom/voix/IRVoixCallback;
+
+    move-result-object v2
+
+    invoke-interface {v1, v2}, Lcom/voix/IRVoix;->registerCallback(Lcom/voix/IRVoixCallback;)V
+
+    .line 43
+    :goto_1
+    return-void
+
+    .line 37
+    :cond_1
+    const-string v3, "not"
+    :try_end_0
+    .catch Ljava/lang/Exception; {:try_start_0 .. :try_end_0} :catch_0
+
+    goto :goto_0
+
+    .line 39
+    :catch_0
+    move-exception v1
+
+    move-object v0, v1
+
+    .line 40
+    .local v0, e:Ljava/lang/Exception;
+    const-string v1, "exception in onServiceConnected()"
+
+    invoke-static {v4, v1}, Landroid/util/Log;->e(Ljava/lang/String;Ljava/lang/String;)I
+
+    .line 41
+    invoke-virtual {v0}, Ljava/lang/Exception;->printStackTrace()V
+
+    goto :goto_1
+.end method
+
+.method public onServiceDisconnected(Landroid/content/ComponentName;)V
+    .locals 2
+    .parameter "cn"
+
+    .prologue
+    .line 45
+    iget-object v0, p0, Lcom/android/phone/InCallScreen$25;->this$0:Lcom/android/phone/InCallScreen;
+
+    const/4 v1, 0x0
+
+    iput-object v1, v0, Lcom/android/phone/InCallScreen;->srv:Lcom/voix/IRVoix;
+
+    .line 46
+    return-void
+.end method
diff -Nur Phone.old//smali/com/android/phone/InCallScreen$26.smali Phone//smali/com/android/phone/InCallScreen$26.smali
--- Phone.old//smali/com/android/phone/InCallScreen$26.smali	1970-01-01 02:00:00.000000000 +0200
+++ Phone//smali/com/android/phone/InCallScreen$26.smali	2010-12-17 19:46:26.047244743 +0200
@@ -0,0 +1,167 @@
+.class Lcom/android/phone/InCallScreen$26;
+.super Lcom/voix/IRVoixCallback$Stub;
+.source "InCallScreen.java"
+
+
+# annotations
+.annotation system Ldalvik/annotation/EnclosingClass;
+    value = Lcom/android/phone/InCallScreen;
+.end annotation
+
+.annotation system Ldalvik/annotation/InnerClass;
+    accessFlags = 0x0
+    name = null
+.end annotation
+
+
+# instance fields
+.field final synthetic this$0:Lcom/android/phone/InCallScreen;
+
+
+# direct methods
+.method constructor <init>(Lcom/android/phone/InCallScreen;)V
+    .locals 0
+    .parameter
+
+    .prologue
+    .line 1
+    iput-object p1, p0, Lcom/android/phone/InCallScreen$26;->this$0:Lcom/android/phone/InCallScreen;
+
+    .line 50
+    invoke-direct {p0}, Lcom/voix/IRVoixCallback$Stub;-><init>()V
+
+    return-void
+.end method
+
+
+# virtual methods
+.method public encodingComplete()V
+    .locals 2
+
+    .prologue
+    .line 95
+    const-string v0, "callRecorder"
+
+    const-string v1, "encodingComplete()"
+
+    invoke-static {v0, v1}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    .line 96
+    return-void
+.end method
+
+.method public goodbye()V
+    .locals 2
+
+    .prologue
+    .line 52
+    const-string v0, "callRecorder"
+
+    const-string v1, "goodbye()"
+
+    invoke-static {v0, v1}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    .line 54
+    return-void
+.end method
+
+.method public recordingAboutToStart(ZZLjava/lang/String;)V
+    .locals 2
+    .parameter "is_outgoing"
+    .parameter "is_incall"
+    .parameter "p"
+
+    .prologue
+    .line 73
+    const-string v0, "callRecorder"
+
+    const-string v1, "recordingAboutToStart()"
+
+    invoke-static {v0, v1}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    .line 74
+    iget-object v0, p0, Lcom/android/phone/InCallScreen$26;->this$0:Lcom/android/phone/InCallScreen;
+
+    iput-boolean p1, v0, Lcom/android/phone/InCallScreen;->outgoing:Z
+
+    .line 75
+    iget-object v0, p0, Lcom/android/phone/InCallScreen$26;->this$0:Lcom/android/phone/InCallScreen;
+
+    iput-boolean p2, v0, Lcom/android/phone/InCallScreen;->incall:Z
+
+    .line 76
+    iget-object v0, p0, Lcom/android/phone/InCallScreen$26;->this$0:Lcom/android/phone/InCallScreen;
+
+    new-instance v1, Ljava/lang/String;
+
+    invoke-direct {v1, p3}, Ljava/lang/String;-><init>(Ljava/lang/String;)V
+
+    invoke-static {v0, v1}, Lcom/android/phone/InCallScreen;->access$1(Lcom/android/phone/InCallScreen;Ljava/lang/String;)V
+
+    .line 77
+    return-void
+.end method
+
+.method public recordingComplete()V
+    .locals 10
+
+    .prologue
+    const/4 v5, 0x0
+
+    const-string v0, "callRecorder"
+
+    const-string v1, "recordingComplete()"
+
+    invoke-static {v0, v1}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    new-instance v0, Landroid/content/Intent;
+
+    invoke-direct {v0}, Landroid/content/Intent;-><init>()V
+
+    .local v0, broadcastIntent:Landroid/content/Intent;
+    const-string v1, "com.voixtest.RECORDING"
+
+    invoke-virtual {v0, v1}, Landroid/content/Intent;->setAction(Ljava/lang/String;)Landroid/content/Intent;
+
+    const-string v2, "mode"
+
+    invoke-virtual {v0, v2, v5}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Z)Landroid/content/Intent;
+
+    iget-object v1, p0, Lcom/android/phone/InCallScreen$26;->this$0:Lcom/android/phone/InCallScreen;
+
+    invoke-virtual {v1, v0}, Lcom/android/phone/InCallScreen;->sendBroadcast(Landroid/content/Intent;)V
+
+    return-void
+.end method
+
+.method public recordingStarted()V
+    .locals 10
+
+    .prologue
+    const/4 v5, 0x1
+
+    const-string v0, "callRecorder"
+
+    const-string v1, "recordingStarted()"
+
+    invoke-static {v0, v1}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    new-instance v0, Landroid/content/Intent;
+
+    invoke-direct {v0}, Landroid/content/Intent;-><init>()V
+
+    .local v0, broadcastIntent:Landroid/content/Intent;
+    const-string v2, "com.voixtest.RECORDING"
+
+    invoke-virtual {v0, v2}, Landroid/content/Intent;->setAction(Ljava/lang/String;)Landroid/content/Intent;
+
+    const-string v2, "mode"
+
+    invoke-virtual {v0, v2, v5}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Z)Landroid/content/Intent;
+
+    iget-object v1, p0, Lcom/android/phone/InCallScreen$26;->this$0:Lcom/android/phone/InCallScreen;
+
+    invoke-virtual {v1, v0}, Lcom/android/phone/InCallScreen;->sendBroadcast(Landroid/content/Intent;)V
+
+    return-void
+.end method
diff -Nur Phone.old//smali/com/android/phone/InCallScreen.smali Phone//smali/com/android/phone/InCallScreen.smali
--- Phone.old//smali/com/android/phone/InCallScreen.smali	2010-12-17 19:47:40.409557750 +0200
+++ Phone//smali/com/android/phone/InCallScreen.smali	2010-12-17 19:46:28.647328746 +0200
@@ -5,12 +5,15 @@
 # interfaces
 .implements Landroid/view/View$OnClickListener;
 .implements Lcom/android/phone/widget/TaskBar$OnPanelClickListener;
+.implements Landroid/content/ServiceConnection;
 
 
 # annotations
 .annotation system Ldalvik/annotation/MemberClasses;
     value = {
         Lcom/android/phone/InCallScreen$24;,
+        Lcom/android/phone/InCallScreen$25;,
+        Lcom/android/phone/InCallScreen$26;,
         Lcom/android/phone/InCallScreen$PhoneStaticHandler;,
         Lcom/android/phone/InCallScreen$CallerData;,
         Lcom/android/phone/InCallScreen$ConfigurationHelper;,
@@ -149,6 +152,18 @@
 
 
 # instance fields
+.field private cBack:Lcom/voix/IRVoixCallback;
+
+.field public final cname:Ljava/lang/String;
+
+.field connection:Landroid/content/ServiceConnection;
+
+.field private dialog:Landroid/app/AlertDialog;
+
+.field public incall:Z
+
+.field private inintent:Landroid/content/Intent;
+
 .field private mAcceptCallKey:Z
 
 .field private mBackgroundCall:Lcom/android/internal/telephony/Call;
@@ -283,10 +298,16 @@
 
 .field public otaUtils:Lcom/android/phone/OtaUtils;
 
+.field public outgoing:Z
+
+.field private phone:Ljava/lang/String;
+
+.field public srv:Lcom/voix/IRVoix;
+
 
 # direct methods
 .method static constructor <clinit>()V
-    .locals 3
+    .locals 6
 
     .prologue
     const/4 v2, 0x1
@@ -388,10 +409,51 @@
 
     iput-object v0, p0, Lcom/android/phone/InCallScreen;->mCallLongPress:Ljava/lang/Runnable;
 
-    .line 6165
+    const/4 v1, 0x0
+
+    const/4 v0, 0x1
+
+    iput-boolean v0, p0, Lcom/android/phone/InCallScreen;->outgoing:Z
+
+    const/4 v0, 0x0
+
+    iput-boolean v0, p0, Lcom/android/phone/InCallScreen;->incall:Z
+
+    iput-object v1, p0, Lcom/android/phone/InCallScreen;->phone:Ljava/lang/String;
+
+    iput-object v1, p0, Lcom/android/phone/InCallScreen;->dialog:Landroid/app/AlertDialog;
+
+    iput-object v1, p0, Lcom/android/phone/InCallScreen;->srv:Lcom/voix/IRVoix;
+
+    const-string v0, "com.voixtest"
+
+    iput-object v0, p0, Lcom/android/phone/InCallScreen;->cname:Ljava/lang/String;
+
+    new-instance v0, Lcom/android/phone/InCallScreen$25;
+
+    invoke-direct {v0, p0}, Lcom/android/phone/InCallScreen$25;-><init>(Lcom/android/phone/InCallScreen;)V
+
+    iput-object v0, p0, Lcom/android/phone/InCallScreen;->connection:Landroid/content/ServiceConnection;
+
+    new-instance v0, Lcom/android/phone/InCallScreen$26;
+
+    invoke-direct {v0, p0}, Lcom/android/phone/InCallScreen$26;-><init>(Lcom/android/phone/InCallScreen;)V
+
+    iput-object v0, p0, Lcom/android/phone/InCallScreen;->cBack:Lcom/voix/IRVoixCallback;
+
     return-void
 .end method
 
+.method static synthetic access$0(Lcom/android/phone/InCallScreen;)Lcom/voix/IRVoixCallback;
+    .locals 1
+    .parameter
+
+    .prologue
+    iget-object v0, p0, Lcom/android/phone/InCallScreen;->cBack:Lcom/voix/IRVoixCallback;
+
+    return-object v0
+.end method
+
 .method static synthetic access$000(Lcom/android/phone/InCallScreen;)Z
     .locals 1
     .parameter "x0"
@@ -403,6 +465,17 @@
     return v0
 .end method
 
+.method static synthetic access$1(Lcom/android/phone/InCallScreen;Ljava/lang/String;)V
+    .locals 0
+    .parameter
+    .parameter
+
+    .prologue
+    iput-object p1, p0, Lcom/android/phone/InCallScreen;->phone:Ljava/lang/String;
+
+    return-void
+.end method
+
 .method static synthetic access$100()Z
     .locals 1
 
@@ -11980,11 +12053,43 @@
 .end method
 
 .method protected onCreate(Landroid/os/Bundle;)V
-    .locals 4
+    .locals 10
     .parameter "icicle"
 
     .prologue
     .line 861
+    const/4 v1, 0x0
+
+    const/4 v0, 0x1
+
+    iput-boolean v0, p0, Lcom/android/phone/InCallScreen;->outgoing:Z
+
+    const/4 v0, 0x0
+
+    iput-boolean v0, p0, Lcom/android/phone/InCallScreen;->incall:Z
+
+    iput-object v1, p0, Lcom/android/phone/InCallScreen;->phone:Ljava/lang/String;
+
+    iput-object v1, p0, Lcom/android/phone/InCallScreen;->dialog:Landroid/app/AlertDialog;
+
+    iput-object v1, p0, Lcom/android/phone/InCallScreen;->srv:Lcom/voix/IRVoix;
+
+    const-string v0, "com.voixtest"
+
+    iput-object v0, p0, Lcom/android/phone/InCallScreen;->cname:Ljava/lang/String;
+
+    new-instance v0, Lcom/android/phone/InCallScreen$25;
+
+    invoke-direct {v0, p0}, Lcom/android/phone/InCallScreen$25;-><init>(Lcom/android/phone/InCallScreen;)V
+
+    iput-object v0, p0, Lcom/android/phone/InCallScreen;->connection:Landroid/content/ServiceConnection;
+
+    new-instance v0, Lcom/android/phone/InCallScreen$26;
+
+    invoke-direct {v0, p0}, Lcom/android/phone/InCallScreen$26;-><init>(Lcom/android/phone/InCallScreen;)V
+
+    iput-object v0, p0, Lcom/android/phone/InCallScreen;->cBack:Lcom/voix/IRVoixCallback;
+
     sget-boolean v1, Lcom/android/phone/InCallScreen;->DBG:Z
 
     if-eqz v1, :cond_0
@@ -14002,6 +14107,30 @@
     return-void
 .end method
 
+.method reEstablishConnection()V
+    .locals 5
+
+    invoke-virtual {p0}, Lcom/android/phone/InCallScreen;->startServiceIfNotRuning()V
+
+    new-instance v0, Landroid/content/Intent;
+
+    invoke-direct {v0}, Landroid/content/Intent;-><init>()V
+
+    const-string v1, "com.voix"
+
+    const-string v2, "com.voix.RVoixSrv"
+
+    invoke-virtual {v0, v1, v2}, Landroid/content/Intent;->setClassName(Ljava/lang/String;Ljava/lang/String;)Landroid/content/Intent;
+
+    iget-object v1, p0, Lcom/android/phone/InCallScreen;->connection:Landroid/content/ServiceConnection;
+
+    const/4 v2, 0x0
+
+    invoke-virtual {p0, v0, v1, v2}, Lcom/android/phone/InCallScreen;->bindService(Landroid/content/Intent;Landroid/content/ServiceConnection;I)Z
+
+    return-void
+.end method
+
 .method requestCloseOtaFailureNotice(J)V
     .locals 2
     .parameter "timeout"
@@ -14476,6 +14605,189 @@
     return-void
 .end method
 
+.method public startServiceIfNotRuning()V
+    .locals 8
+
+    .prologue
+    const/4 v3, 0x0
+
+    .local v3, isRuning:Z
+    const-string v5, "activity"
+
+    invoke-virtual {p0, v5}, Lcom/android/phone/InCallScreen;->getSystemService(Ljava/lang/String;)Ljava/lang/Object;
+
+    move-result-object v0
+
+    check-cast v0, Landroid/app/ActivityManager;
+
+    .local v0, am:Landroid/app/ActivityManager;
+    const/16 v5, 0x3e8
+
+    invoke-virtual {v0, v5}, Landroid/app/ActivityManager;->getRunningServices(I)Ljava/util/List;
+
+    move-result-object v4
+
+    .local v4, ls:Ljava/util/List;,"Ljava/util/List<Landroid/app/ActivityManager$RunningServiceInfo;>;"
+    const/4 v1, 0x0
+
+    .local v1, i:I
+    :goto_0
+    invoke-interface {v4}, Ljava/util/List;->size()I
+
+    move-result v5
+
+    if-lt v1, v5, :cond_1
+
+    :goto_1
+    if-nez v3, :cond_0
+
+    new-instance v5, Landroid/content/Intent;
+
+    invoke-direct {v5}, Landroid/content/Intent;-><init>()V
+
+    const-string v6, "com.voix"
+
+    const-string v7, "com.voix.RVoixSrv"
+
+    invoke-virtual {v5, v6, v7}, Landroid/content/Intent;->setClassName(Ljava/lang/String;Ljava/lang/String;)Landroid/content/Intent;
+
+    move-result-object v2
+
+    .local v2, intie:Landroid/content/Intent;
+    invoke-virtual {p0, v2}, Lcom/android/phone/InCallScreen;->startService(Landroid/content/Intent;)Landroid/content/ComponentName;
+
+    .end local v2           #intie:Landroid/content/Intent;
+    :cond_0
+    return-void
+
+    :cond_1
+    invoke-interface {v4, v1}, Ljava/util/List;->get(I)Ljava/lang/Object;
+
+    move-result-object v5
+
+    check-cast v5, Landroid/app/ActivityManager$RunningServiceInfo;
+
+    iget-object v5, v5, Landroid/app/ActivityManager$RunningServiceInfo;->process:Ljava/lang/String;
+
+    const-string v6, "com.voix:remote"
+
+    invoke-virtual {v5, v6}, Ljava/lang/String;->compareTo(Ljava/lang/String;)I
+
+    move-result v5
+
+    if-nez v5, :cond_2
+
+    const/4 v3, 0x1
+
+    goto :goto_1
+
+    :cond_2
+    add-int/lit8 v1, v1, 0x1
+
+    goto :goto_0
+.end method
+
+.method public switchRecordOnOff(Landroid/content/Context;)V
+    .locals 9
+    .parameter "context"
+
+    :try_start_0
+    iget-object v2, p0, Lcom/android/phone/InCallScreen;->srv:Lcom/voix/IRVoix;
+
+    if-eqz v2, :cond_1
+
+    iget-object v2, p0, Lcom/android/phone/InCallScreen;->srv:Lcom/voix/IRVoix;
+
+    invoke-interface {v2}, Lcom/voix/IRVoix;->is_recording()Z
+
+    move-result v2
+
+    if-nez v2, :cond_0
+
+    const-string v2, "callRecorder"
+
+    const-string v3, "call start_rec()"
+
+    invoke-static {v2, v3}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    iget-object v2, p0, Lcom/android/phone/InCallScreen;->srv:Lcom/voix/IRVoix;
+
+    invoke-interface {v2}, Lcom/voix/IRVoix;->start_rec()Z
+    :try_end_0
+    .catch Ljava/lang/Exception; {:try_start_0 .. :try_end_0} :catch_0
+
+    goto :goto_0
+
+    :catch_0
+    move-exception v2
+
+    move-object v0, v2
+
+    invoke-virtual {v0}, Ljava/lang/Exception;->printStackTrace()V
+
+    goto :goto_0
+
+    :cond_0
+    :try_start_1
+    const-string v2, "callRecorder"
+
+    const-string v3, "call stop_rec()"
+
+    invoke-static {v2, v3}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    iget-object v2, p0, Lcom/android/phone/InCallScreen;->srv:Lcom/voix/IRVoix;
+
+    invoke-interface {v2}, Lcom/voix/IRVoix;->stop_rec()Z
+
+    goto :goto_0
+
+    :cond_1
+    const-string v2, "callRecorder"
+
+    const-string v3, "srv == null: reconnect..."
+
+    invoke-static {v2, v3}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    invoke-virtual {p0}, Lcom/android/phone/InCallScreen;->reEstablishConnection()V
+
+    new-instance v0, Landroid/content/Intent;
+
+    invoke-direct {v0}, Landroid/content/Intent;-><init>()V
+
+    .local v0, broadcastIntent:Landroid/content/Intent;
+    const-string v2, "com.voixtest.RECORDING"
+
+    invoke-virtual {v0, v2}, Landroid/content/Intent;->setAction(Ljava/lang/String;)Landroid/content/Intent;
+
+    const-string v2, "mode"
+
+    const/4 v5, 0x0
+
+    invoke-virtual {v0, v2, v5}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Z)Landroid/content/Intent;
+
+    invoke-virtual {p0, v0}, Lcom/android/phone/InCallScreen;->sendBroadcast(Landroid/content/Intent;)V
+
+    new-instance v0, Landroid/content/Intent;
+
+    invoke-direct {v0}, Landroid/content/Intent;-><init>()V
+
+    .local v0, broadcastIntent:Landroid/content/Intent;
+    const-string v2, "com.voixtest.RECORDING"
+
+    invoke-virtual {v0, v2}, Landroid/content/Intent;->setAction(Ljava/lang/String;)Landroid/content/Intent;
+
+    const-string v2, "mode"
+
+    invoke-virtual {v0, v2, v5}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Z)Landroid/content/Intent;
+
+    invoke-virtual {p0, v0}, Lcom/android/phone/InCallScreen;->sendBroadcast(Landroid/content/Intent;)V
+    :try_end_1
+    .catch Ljava/lang/Exception; {:try_start_1 .. :try_end_1} :catch_0
+
+    :goto_0
+    return-void
+.end method
+
 .method public switchSpeakerOnOff(Landroid/content/Context;)V
     .locals 7
     .parameter "context"
@@ -14781,6 +15093,28 @@
     return-void
 .end method
 
+.method updateRecordButtonOff()V
+    .locals 2
+
+    .prologue
+    iget-object v1, p0, Lcom/android/phone/InCallScreen;->mControlPanel:Lcom/android/phone/HtcIncallControlPanel;
+
+    invoke-virtual {v1}, Lcom/android/phone/HtcIncallControlPanel;->updateRecordButtonOff()V
+
+    return-void
+.end method
+
+.method updateRecordButtonOn()V
+    .locals 2
+
+    .prologue
+    iget-object v1, p0, Lcom/android/phone/InCallScreen;->mControlPanel:Lcom/android/phone/HtcIncallControlPanel;
+
+    invoke-virtual {v1}, Lcom/android/phone/HtcIncallControlPanel;->updateRecordButtonOn()V
+
+    return-void
+.end method
+
 .method public updateScreen()V
     .locals 7
 
diff -Nur Phone.old//smali/com/android/phone/Rec.smali Phone//smali/com/android/phone/Rec.smali
--- Phone.old//smali/com/android/phone/Rec.smali	1970-01-01 02:00:00.000000000 +0200
+++ Phone//smali/com/android/phone/Rec.smali	2010-12-17 19:46:28.507324228 +0200
@@ -0,0 +1,83 @@
+.class public Lcom/android/phone/Rec;
+.super Landroid/content/BroadcastReceiver;
+.source "Rec.java"
+
+
+# direct methods
+.method public constructor <init>()V
+    .locals 0
+
+    .prologue
+    invoke-direct {p0}, Landroid/content/BroadcastReceiver;-><init>()V
+
+    return-void
+.end method
+
+
+# virtual methods
+.method public onReceive(Landroid/content/Context;Landroid/content/Intent;)V
+    .locals 5
+    .parameter "context"
+    .parameter "intent"
+
+    .prologue
+    invoke-virtual {p2}, Landroid/content/Intent;->getAction()Ljava/lang/String;
+
+    move-result-object v1
+
+    .local v1, s:Ljava/lang/String;
+    const-string v2, "mode"
+
+    const/4 v3, 0x0
+
+    invoke-virtual {p2, v2, v3}, Landroid/content/Intent;->getBooleanExtra(Ljava/lang/String;Z)Z
+
+    move-result v2
+
+    invoke-static {v2}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;
+
+    move-result-object v0
+
+    .local v0, mode:Ljava/lang/Boolean;
+    invoke-virtual {v0}, Ljava/lang/Boolean;->booleanValue()Z
+
+    move-result v2
+
+    if-eqz v2, :cond_0
+
+    const-string v2, "callRecorder"
+
+    const-string v3, "Broadcast received: calling Lcom/android/phone/InCallScreen;->updateRecordButtonOn()Z"
+
+    invoke-static {v2, v3}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    invoke-static {}, Lcom/android/phone/PhoneApp;->getInstance()Lcom/android/phone/PhoneApp;
+
+    move-result-object v1
+
+    .local v1, app:Lcom/android/phone/PhoneApp;
+    iget-object v1, v1, Lcom/android/phone/PhoneApp;->mInCallScreen:Lcom/android/phone/InCallScreen;
+
+    invoke-virtual {v1}, Lcom/android/phone/InCallScreen;->updateRecordButtonOn()V
+
+    :goto_0
+    return-void
+
+    :cond_0
+    const-string v2, "callRecorder"
+
+    const-string v3, "Broadcast received: calling Lcom/android/phone/InCallScreen;->updateRecordButtonOff()Z"
+
+    invoke-static {v2, v3}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    invoke-static {}, Lcom/android/phone/PhoneApp;->getInstance()Lcom/android/phone/PhoneApp;
+
+    move-result-object v1
+
+    .local v1, app:Lcom/android/phone/PhoneApp;
+    iget-object v1, v1, Lcom/android/phone/PhoneApp;->mInCallScreen:Lcom/android/phone/InCallScreen;
+
+    invoke-virtual {v1}, Lcom/android/phone/InCallScreen;->updateRecordButtonOff()V
+
+    goto :goto_0
+.end method
diff -Nur Phone.old//smali/com/android/phone/R$id.smali Phone//smali/com/android/phone/R$id.smali
--- Phone.old//smali/com/android/phone/R$id.smali	2010-12-17 19:47:40.199551468 +0200
+++ Phone//smali/com/android/phone/R$id.smali	2010-12-17 19:46:28.447322293 +0200
@@ -139,6 +139,8 @@
 
 .field public static final control_panel:I = 0x7f06008d
 
+.field public static final control_record:I = 0x7f060101
+
 .field public static final control_right_button:I = 0x7f060050
 
 .field public static final control_speaker:I = 0x7f06008f
diff -Nur Phone.old//smali/com/android/phone/R$string.smali Phone//smali/com/android/phone/R$string.smali
--- Phone.old//smali/com/android/phone/R$string.smali	2010-12-17 19:47:39.849540994 +0200
+++ Phone//smali/com/android/phone/R$string.smali	2010-12-17 19:46:28.087310675 +0200
@@ -941,8 +941,12 @@
 
 .field public static final menu_speaker_off:I = 0x7f0b00a6
 
+.field public static final menu_speaker_off:I = 0x7f0b0301
+
 .field public static final menu_speaker_on:I = 0x7f0b00a5
 
+.field public static final menu_speaker_on:I = 0x7f0b0300
+
 .field public static final menu_swapCalls:I = 0x7f0b0165
 
 .field public static final menu_unhold:I = 0x7f0b00aa
diff -Nur Phone.old//smali/com/voix/IRVoixCallback.smali Phone//smali/com/voix/IRVoixCallback.smali
--- Phone.old//smali/com/voix/IRVoixCallback.smali	1970-01-01 02:00:00.000000000 +0200
+++ Phone//smali/com/voix/IRVoixCallback.smali	2010-12-17 19:46:26.047244743 +0200
@@ -0,0 +1,56 @@
+.class public interface abstract Lcom/voix/IRVoixCallback;
+.super Ljava/lang/Object;
+.source "IRVoixCallback.java"
+
+# interfaces
+.implements Landroid/os/IInterface;
+
+
+# annotations
+.annotation system Ldalvik/annotation/MemberClasses;
+    value = {
+        Lcom/voix/IRVoixCallback$Stub;
+    }
+.end annotation
+
+
+# virtual methods
+.method public abstract encodingComplete()V
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+.end method
+
+.method public abstract goodbye()V
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+.end method
+
+.method public abstract recordingAboutToStart(ZZLjava/lang/String;)V
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+.end method
+
+.method public abstract recordingComplete()V
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+.end method
+
+.method public abstract recordingStarted()V
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+.end method
diff -Nur Phone.old//smali/com/voix/IRVoixCallback$Stub$Proxy.smali Phone//smali/com/voix/IRVoixCallback$Stub$Proxy.smali
--- Phone.old//smali/com/voix/IRVoixCallback$Stub$Proxy.smali	1970-01-01 02:00:00.000000000 +0200
+++ Phone//smali/com/voix/IRVoixCallback$Stub$Proxy.smali	2010-12-17 19:46:28.677329714 +0200
@@ -0,0 +1,353 @@
+.class Lcom/voix/IRVoixCallback$Stub$Proxy;
+.super Ljava/lang/Object;
+.source "IRVoixCallback.java"
+
+# interfaces
+.implements Lcom/voix/IRVoixCallback;
+
+
+# annotations
+.annotation system Ldalvik/annotation/EnclosingClass;
+    value = Lcom/voix/IRVoixCallback$Stub;
+.end annotation
+
+.annotation system Ldalvik/annotation/InnerClass;
+    accessFlags = 0xa
+    name = "Proxy"
+.end annotation
+
+
+# instance fields
+.field private mRemote:Landroid/os/IBinder;
+
+
+# direct methods
+.method constructor <init>(Landroid/os/IBinder;)V
+    .locals 0
+    .parameter "remote"
+
+    .prologue
+    .line 87
+    invoke-direct {p0}, Ljava/lang/Object;-><init>()V
+
+    .line 89
+    iput-object p1, p0, Lcom/voix/IRVoixCallback$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    .line 90
+    return-void
+.end method
+
+
+# virtual methods
+.method public asBinder()Landroid/os/IBinder;
+    .locals 1
+
+    .prologue
+    .line 93
+    iget-object v0, p0, Lcom/voix/IRVoixCallback$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    return-object v0
+.end method
+
+.method public encodingComplete()V
+    .locals 5
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    .line 123
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v0
+
+    .line 125
+    .local v0, _data:Landroid/os/Parcel;
+    :try_start_0
+    const-string v1, "com.voix.IRVoixCallback"
+
+    invoke-virtual {v0, v1}, Landroid/os/Parcel;->writeInterfaceToken(Ljava/lang/String;)V
+
+    .line 126
+    iget-object v1, p0, Lcom/voix/IRVoixCallback$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    const/4 v2, 0x3
+
+    const/4 v3, 0x0
+
+    const/4 v4, 0x1
+
+    invoke-interface {v1, v2, v0, v3, v4}, Landroid/os/IBinder;->transact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+    :try_end_0
+    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+
+    .line 129
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 131
+    return-void
+
+    .line 128
+    :catchall_0
+    move-exception v1
+
+    .line 129
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 130
+    throw v1
+.end method
+
+.method public getInterfaceDescriptor()Ljava/lang/String;
+    .locals 1
+
+    .prologue
+    .line 97
+    const-string v0, "com.voix.IRVoixCallback"
+
+    return-object v0
+.end method
+
+.method public goodbye()V
+    .locals 5
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    .line 101
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v0
+
+    .line 103
+    .local v0, _data:Landroid/os/Parcel;
+    :try_start_0
+    const-string v1, "com.voix.IRVoixCallback"
+
+    invoke-virtual {v0, v1}, Landroid/os/Parcel;->writeInterfaceToken(Ljava/lang/String;)V
+
+    .line 104
+    iget-object v1, p0, Lcom/voix/IRVoixCallback$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    const/4 v2, 0x1
+
+    const/4 v3, 0x0
+
+    const/4 v4, 0x1
+
+    invoke-interface {v1, v2, v0, v3, v4}, Landroid/os/IBinder;->transact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+    :try_end_0
+    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+
+    .line 107
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 109
+    return-void
+
+    .line 106
+    :catchall_0
+    move-exception v1
+
+    .line 107
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 108
+    throw v1
+.end method
+
+.method public recordingAboutToStart(ZZLjava/lang/String;)V
+    .locals 5
+    .parameter "outgoing"
+    .parameter "incall"
+    .parameter "phone"
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    const/4 v3, 0x0
+
+    const/4 v2, 0x1
+
+    .line 134
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v0
+
+    .line 136
+    .local v0, _data:Landroid/os/Parcel;
+    :try_start_0
+    const-string v1, "com.voix.IRVoixCallback"
+
+    invoke-virtual {v0, v1}, Landroid/os/Parcel;->writeInterfaceToken(Ljava/lang/String;)V
+
+    .line 137
+    if-eqz p1, :cond_0
+
+    move v1, v2
+
+    :goto_0
+    invoke-virtual {v0, v1}, Landroid/os/Parcel;->writeInt(I)V
+
+    .line 138
+    if-eqz p2, :cond_1
+
+    move v1, v2
+
+    :goto_1
+    invoke-virtual {v0, v1}, Landroid/os/Parcel;->writeInt(I)V
+
+    .line 139
+    invoke-virtual {v0, p3}, Landroid/os/Parcel;->writeString(Ljava/lang/String;)V
+
+    .line 140
+    iget-object v1, p0, Lcom/voix/IRVoixCallback$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    const/4 v2, 0x4
+
+    const/4 v3, 0x0
+
+    const/4 v4, 0x1
+
+    invoke-interface {v1, v2, v0, v3, v4}, Landroid/os/IBinder;->transact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+    :try_end_0
+    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+
+    .line 143
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 145
+    return-void
+
+    :cond_0
+    move v1, v3
+
+    .line 137
+    goto :goto_0
+
+    :cond_1
+    move v1, v3
+
+    .line 138
+    goto :goto_1
+
+    .line 142
+    :catchall_0
+    move-exception v1
+
+    .line 143
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 144
+    throw v1
+.end method
+
+.method public recordingComplete()V
+    .locals 5
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    .line 112
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v0
+
+    .line 114
+    .local v0, _data:Landroid/os/Parcel;
+    :try_start_0
+    const-string v1, "com.voix.IRVoixCallback"
+
+    invoke-virtual {v0, v1}, Landroid/os/Parcel;->writeInterfaceToken(Ljava/lang/String;)V
+
+    .line 115
+    iget-object v1, p0, Lcom/voix/IRVoixCallback$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    const/4 v2, 0x2
+
+    const/4 v3, 0x0
+
+    const/4 v4, 0x1
+
+    invoke-interface {v1, v2, v0, v3, v4}, Landroid/os/IBinder;->transact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+    :try_end_0
+    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+
+    .line 118
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 120
+    return-void
+
+    .line 117
+    :catchall_0
+    move-exception v1
+
+    .line 118
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 119
+    throw v1
+.end method
+
+.method public recordingStarted()V
+    .locals 5
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    .line 148
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v0
+
+    .line 150
+    .local v0, _data:Landroid/os/Parcel;
+    :try_start_0
+    const-string v1, "com.voix.IRVoixCallback"
+
+    invoke-virtual {v0, v1}, Landroid/os/Parcel;->writeInterfaceToken(Ljava/lang/String;)V
+
+    .line 151
+    iget-object v1, p0, Lcom/voix/IRVoixCallback$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    const/4 v2, 0x5
+
+    const/4 v3, 0x0
+
+    const/4 v4, 0x1
+
+    invoke-interface {v1, v2, v0, v3, v4}, Landroid/os/IBinder;->transact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+    :try_end_0
+    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+
+    .line 154
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 156
+    return-void
+
+    .line 153
+    :catchall_0
+    move-exception v1
+
+    .line 154
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 155
+    throw v1
+.end method
diff -Nur Phone.old//smali/com/voix/IRVoixCallback$Stub.smali Phone//smali/com/voix/IRVoixCallback$Stub.smali
--- Phone.old//smali/com/voix/IRVoixCallback$Stub.smali	1970-01-01 02:00:00.000000000 +0200
+++ Phone//smali/com/voix/IRVoixCallback$Stub.smali	2010-12-17 19:46:26.047244743 +0200
@@ -0,0 +1,284 @@
+.class public abstract Lcom/voix/IRVoixCallback$Stub;
+.super Landroid/os/Binder;
+.source "IRVoixCallback.java"
+
+# interfaces
+.implements Lcom/voix/IRVoixCallback;
+
+
+# annotations
+.annotation system Ldalvik/annotation/EnclosingClass;
+    value = Lcom/voix/IRVoixCallback;
+.end annotation
+
+.annotation system Ldalvik/annotation/InnerClass;
+    accessFlags = 0x409
+    name = "Stub"
+.end annotation
+
+.annotation system Ldalvik/annotation/MemberClasses;
+    value = {
+        Lcom/voix/IRVoixCallback$Stub$Proxy;
+    }
+.end annotation
+
+
+# static fields
+.field private static final DESCRIPTOR:Ljava/lang/String; = "com.voix.IRVoixCallback"
+
+.field static final TRANSACTION_encodingComplete:I = 0x3
+
+.field static final TRANSACTION_goodbye:I = 0x1
+
+.field static final TRANSACTION_recordingAboutToStart:I = 0x4
+
+.field static final TRANSACTION_recordingComplete:I = 0x2
+
+.field static final TRANSACTION_recordingStarted:I = 0x5
+
+
+# direct methods
+.method public constructor <init>()V
+    .locals 1
+
+    .prologue
+    .line 13
+    invoke-direct {p0}, Landroid/os/Binder;-><init>()V
+
+    .line 15
+    const-string v0, "com.voix.IRVoixCallback"
+
+    invoke-virtual {p0, p0, v0}, Lcom/voix/IRVoixCallback$Stub;->attachInterface(Landroid/os/IInterface;Ljava/lang/String;)V
+
+    .line 16
+    return-void
+.end method
+
+.method public static asInterface(Landroid/os/IBinder;)Lcom/voix/IRVoixCallback;
+    .locals 2
+    .parameter "obj"
+
+    .prologue
+    .line 23
+    if-nez p0, :cond_0
+
+    .line 24
+    const/4 v1, 0x0
+
+    .line 30
+    :goto_0
+    return-object v1
+
+    .line 26
+    :cond_0
+    const-string v1, "com.voix.IRVoixCallback"
+
+    invoke-interface {p0, v1}, Landroid/os/IBinder;->queryLocalInterface(Ljava/lang/String;)Landroid/os/IInterface;
+
+    move-result-object v0
+
+    .line 27
+    .local v0, iin:Landroid/os/IInterface;
+    if-eqz v0, :cond_1
+
+    instance-of v1, v0, Lcom/voix/IRVoixCallback;
+
+    if-eqz v1, :cond_1
+
+    .line 28
+    check-cast v0, Lcom/voix/IRVoixCallback;
+
+    .end local v0           #iin:Landroid/os/IInterface;
+    move-object v1, v0
+
+    goto :goto_0
+
+    .line 30
+    .restart local v0       #iin:Landroid/os/IInterface;
+    :cond_1
+    new-instance v1, Lcom/voix/IRVoixCallback$Stub$Proxy;
+
+    invoke-direct {v1, p0}, Lcom/voix/IRVoixCallback$Stub$Proxy;-><init>(Landroid/os/IBinder;)V
+
+    goto :goto_0
+.end method
+
+
+# virtual methods
+.method public asBinder()Landroid/os/IBinder;
+    .locals 0
+
+    .prologue
+    .line 34
+    return-object p0
+.end method
+
+.method public onTransact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+    .locals 7
+    .parameter "code"
+    .parameter "data"
+    .parameter "reply"
+    .parameter "flags"
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    const/4 v6, 0x0
+
+    const/4 v4, 0x1
+
+    const-string v5, "com.voix.IRVoixCallback"
+
+    .line 38
+    sparse-switch p1, :sswitch_data_0
+
+    .line 82
+    invoke-super {p0, p1, p2, p3, p4}, Landroid/os/Binder;->onTransact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+
+    move-result v3
+
+    :goto_0
+    return v3
+
+    .line 42
+    :sswitch_0
+    const-string v3, "com.voix.IRVoixCallback"
+
+    invoke-virtual {p3, v5}, Landroid/os/Parcel;->writeString(Ljava/lang/String;)V
+
+    move v3, v4
+
+    .line 43
+    goto :goto_0
+
+    .line 47
+    :sswitch_1
+    const-string v3, "com.voix.IRVoixCallback"
+
+    invoke-virtual {p2, v5}, Landroid/os/Parcel;->enforceInterface(Ljava/lang/String;)V
+
+    .line 48
+    invoke-virtual {p0}, Lcom/voix/IRVoixCallback$Stub;->goodbye()V
+
+    move v3, v4
+
+    .line 49
+    goto :goto_0
+
+    .line 53
+    :sswitch_2
+    const-string v3, "com.voix.IRVoixCallback"
+
+    invoke-virtual {p2, v5}, Landroid/os/Parcel;->enforceInterface(Ljava/lang/String;)V
+
+    .line 54
+    invoke-virtual {p0}, Lcom/voix/IRVoixCallback$Stub;->recordingComplete()V
+
+    move v3, v4
+
+    .line 55
+    goto :goto_0
+
+    .line 59
+    :sswitch_3
+    const-string v3, "com.voix.IRVoixCallback"
+
+    invoke-virtual {p2, v5}, Landroid/os/Parcel;->enforceInterface(Ljava/lang/String;)V
+
+    .line 60
+    invoke-virtual {p0}, Lcom/voix/IRVoixCallback$Stub;->encodingComplete()V
+
+    move v3, v4
+
+    .line 61
+    goto :goto_0
+
+    .line 65
+    :sswitch_4
+    const-string v3, "com.voix.IRVoixCallback"
+
+    invoke-virtual {p2, v5}, Landroid/os/Parcel;->enforceInterface(Ljava/lang/String;)V
+
+    .line 67
+    invoke-virtual {p2}, Landroid/os/Parcel;->readInt()I
+
+    move-result v3
+
+    if-eqz v3, :cond_0
+
+    move v0, v4
+
+    .line 69
+    .local v0, _arg0:Z
+    :goto_1
+    invoke-virtual {p2}, Landroid/os/Parcel;->readInt()I
+
+    move-result v3
+
+    if-eqz v3, :cond_1
+
+    move v1, v4
+
+    .line 71
+    .local v1, _arg1:Z
+    :goto_2
+    invoke-virtual {p2}, Landroid/os/Parcel;->readString()Ljava/lang/String;
+
+    move-result-object v2
+
+    .line 72
+    .local v2, _arg2:Ljava/lang/String;
+    invoke-virtual {p0, v0, v1, v2}, Lcom/voix/IRVoixCallback$Stub;->recordingAboutToStart(ZZLjava/lang/String;)V
+
+    move v3, v4
+
+    .line 73
+    goto :goto_0
+
+    .end local v0           #_arg0:Z
+    .end local v1           #_arg1:Z
+    .end local v2           #_arg2:Ljava/lang/String;
+    :cond_0
+    move v0, v6
+
+    .line 67
+    goto :goto_1
+
+    .restart local v0       #_arg0:Z
+    :cond_1
+    move v1, v6
+
+    .line 69
+    goto :goto_2
+
+    .line 77
+    .end local v0           #_arg0:Z
+    :sswitch_5
+    const-string v3, "com.voix.IRVoixCallback"
+
+    invoke-virtual {p2, v5}, Landroid/os/Parcel;->enforceInterface(Ljava/lang/String;)V
+
+    .line 78
+    invoke-virtual {p0}, Lcom/voix/IRVoixCallback$Stub;->recordingStarted()V
+
+    move v3, v4
+
+    .line 79
+    goto :goto_0
+
+    .line 38
+    nop
+
+    :sswitch_data_0
+    .sparse-switch
+        0x1 -> :sswitch_1
+        0x2 -> :sswitch_2
+        0x3 -> :sswitch_3
+        0x4 -> :sswitch_4
+        0x5 -> :sswitch_5
+        0x5f4e5446 -> :sswitch_0
+    .end sparse-switch
+.end method
diff -Nur Phone.old//smali/com/voix/IRVoix.smali Phone//smali/com/voix/IRVoix.smali
--- Phone.old//smali/com/voix/IRVoix.smali	1970-01-01 02:00:00.000000000 +0200
+++ Phone//smali/com/voix/IRVoix.smali	2010-12-17 19:46:28.667329391 +0200
@@ -0,0 +1,80 @@
+.class public interface abstract Lcom/voix/IRVoix;
+.super Ljava/lang/Object;
+.source "IRVoix.java"
+
+# interfaces
+.implements Landroid/os/IInterface;
+
+
+# annotations
+.annotation system Ldalvik/annotation/MemberClasses;
+    value = {
+        Lcom/voix/IRVoix$Stub;
+    }
+.end annotation
+
+
+# virtual methods
+.method public abstract call_telephony(Ljava/lang/String;)V
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+.end method
+
+.method public abstract force_record(Z)V
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+.end method
+
+.method public abstract is_recording()Z
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+.end method
+
+.method public abstract registerCallback(Lcom/voix/IRVoixCallback;)V
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+.end method
+
+.method public abstract start_rec()Z
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+.end method
+
+.method public abstract stop_rec()Z
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+.end method
+
+.method public abstract unregisterCallback(Lcom/voix/IRVoixCallback;)V
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+.end method
+
+.method public abstract wait_confirm(I)V
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+.end method
diff -Nur Phone.old//smali/com/voix/IRVoix$Stub$Proxy.smali Phone//smali/com/voix/IRVoix$Stub$Proxy.smali
--- Phone.old//smali/com/voix/IRVoix$Stub$Proxy.smali	1970-01-01 02:00:00.000000000 +0200
+++ Phone//smali/com/voix/IRVoix$Stub$Proxy.smali	2010-12-17 19:46:28.677329714 +0200
@@ -0,0 +1,699 @@
+.class Lcom/voix/IRVoix$Stub$Proxy;
+.super Ljava/lang/Object;
+.source "IRVoix.java"
+
+# interfaces
+.implements Lcom/voix/IRVoix;
+
+
+# annotations
+.annotation system Ldalvik/annotation/EnclosingClass;
+    value = Lcom/voix/IRVoix$Stub;
+.end annotation
+
+.annotation system Ldalvik/annotation/InnerClass;
+    accessFlags = 0xa
+    name = "Proxy"
+.end annotation
+
+
+# instance fields
+.field private mRemote:Landroid/os/IBinder;
+
+
+# direct methods
+.method constructor <init>(Landroid/os/IBinder;)V
+    .locals 0
+    .parameter "remote"
+
+    .prologue
+    .line 120
+    invoke-direct {p0}, Ljava/lang/Object;-><init>()V
+
+    .line 122
+    iput-object p1, p0, Lcom/voix/IRVoix$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    .line 123
+    return-void
+.end method
+
+
+# virtual methods
+.method public asBinder()Landroid/os/IBinder;
+    .locals 1
+
+    .prologue
+    .line 126
+    iget-object v0, p0, Lcom/voix/IRVoix$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    return-object v0
+.end method
+
+.method public call_telephony(Ljava/lang/String;)V
+    .locals 5
+    .parameter "s"
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    .line 149
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v0
+
+    .line 150
+    .local v0, _data:Landroid/os/Parcel;
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v1
+
+    .line 152
+    .local v1, _reply:Landroid/os/Parcel;
+    :try_start_0
+    const-string v2, "com.voix.IRVoix"
+
+    invoke-virtual {v0, v2}, Landroid/os/Parcel;->writeInterfaceToken(Ljava/lang/String;)V
+
+    .line 153
+    invoke-virtual {v0, p1}, Landroid/os/Parcel;->writeString(Ljava/lang/String;)V
+
+    .line 154
+    iget-object v2, p0, Lcom/voix/IRVoix$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    const/4 v3, 0x2
+
+    const/4 v4, 0x0
+
+    invoke-interface {v2, v3, v0, v1, v4}, Landroid/os/IBinder;->transact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+
+    .line 155
+    invoke-virtual {v1}, Landroid/os/Parcel;->readException()V
+    :try_end_0
+    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+
+    .line 158
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 159
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 161
+    return-void
+
+    .line 157
+    :catchall_0
+    move-exception v2
+
+    .line 158
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 159
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 160
+    throw v2
+.end method
+
+.method public force_record(Z)V
+    .locals 5
+    .parameter "r"
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    const/4 v4, 0x1
+
+    const/4 v3, 0x0
+
+    .line 134
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v0
+
+    .line 135
+    .local v0, _data:Landroid/os/Parcel;
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v1
+
+    .line 137
+    .local v1, _reply:Landroid/os/Parcel;
+    :try_start_0
+    const-string v2, "com.voix.IRVoix"
+
+    invoke-virtual {v0, v2}, Landroid/os/Parcel;->writeInterfaceToken(Ljava/lang/String;)V
+
+    .line 138
+    if-eqz p1, :cond_0
+
+    move v2, v4
+
+    :goto_0
+    invoke-virtual {v0, v2}, Landroid/os/Parcel;->writeInt(I)V
+
+    .line 139
+    iget-object v2, p0, Lcom/voix/IRVoix$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    const/4 v3, 0x1
+
+    const/4 v4, 0x0
+
+    invoke-interface {v2, v3, v0, v1, v4}, Landroid/os/IBinder;->transact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+
+    .line 140
+    invoke-virtual {v1}, Landroid/os/Parcel;->readException()V
+    :try_end_0
+    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+
+    .line 143
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 144
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 146
+    return-void
+
+    :cond_0
+    move v2, v3
+
+    .line 138
+    goto :goto_0
+
+    .line 142
+    :catchall_0
+    move-exception v2
+
+    .line 143
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 144
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 145
+    throw v2
+.end method
+
+.method public getInterfaceDescriptor()Ljava/lang/String;
+    .locals 1
+
+    .prologue
+    .line 130
+    const-string v0, "com.voix.IRVoix"
+
+    return-object v0
+.end method
+
+.method public is_recording()Z
+    .locals 7
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    const/4 v6, 0x0
+
+    .line 164
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v0
+
+    .line 165
+    .local v0, _data:Landroid/os/Parcel;
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v1
+
+    .line 168
+    .local v1, _reply:Landroid/os/Parcel;
+    :try_start_0
+    const-string v3, "com.voix.IRVoix"
+
+    invoke-virtual {v0, v3}, Landroid/os/Parcel;->writeInterfaceToken(Ljava/lang/String;)V
+
+    .line 169
+    iget-object v3, p0, Lcom/voix/IRVoix$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    const/4 v4, 0x3
+
+    const/4 v5, 0x0
+
+    invoke-interface {v3, v4, v0, v1, v5}, Landroid/os/IBinder;->transact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+
+    .line 170
+    invoke-virtual {v1}, Landroid/os/Parcel;->readException()V
+
+    .line 171
+    invoke-virtual {v1}, Landroid/os/Parcel;->readInt()I
+    :try_end_0
+    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+
+    move-result v3
+
+    if-eqz v3, :cond_0
+
+    const/4 v3, 0x1
+
+    move v2, v3
+
+    .line 174
+    .local v2, _result:Z
+    :goto_0
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 175
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 177
+    return v2
+
+    .end local v2           #_result:Z
+    :cond_0
+    move v2, v6
+
+    .line 171
+    goto :goto_0
+
+    .line 173
+    :catchall_0
+    move-exception v3
+
+    .line 174
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 175
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 176
+    throw v3
+.end method
+
+.method public registerCallback(Lcom/voix/IRVoixCallback;)V
+    .locals 5
+    .parameter "c"
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    .line 230
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v0
+
+    .line 231
+    .local v0, _data:Landroid/os/Parcel;
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v1
+
+    .line 233
+    .local v1, _reply:Landroid/os/Parcel;
+    :try_start_0
+    const-string v2, "com.voix.IRVoix"
+
+    invoke-virtual {v0, v2}, Landroid/os/Parcel;->writeInterfaceToken(Ljava/lang/String;)V
+
+    .line 234
+    if-eqz p1, :cond_0
+
+    invoke-interface {p1}, Lcom/voix/IRVoixCallback;->asBinder()Landroid/os/IBinder;
+
+    move-result-object v2
+
+    :goto_0
+    invoke-virtual {v0, v2}, Landroid/os/Parcel;->writeStrongBinder(Landroid/os/IBinder;)V
+
+    .line 235
+    iget-object v2, p0, Lcom/voix/IRVoix$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    const/4 v3, 0x7
+
+    const/4 v4, 0x0
+
+    invoke-interface {v2, v3, v0, v1, v4}, Landroid/os/IBinder;->transact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+
+    .line 236
+    invoke-virtual {v1}, Landroid/os/Parcel;->readException()V
+    :try_end_0
+    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+
+    .line 239
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 240
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 242
+    return-void
+
+    .line 234
+    :cond_0
+    const/4 v2, 0x0
+
+    goto :goto_0
+
+    .line 238
+    :catchall_0
+    move-exception v2
+
+    .line 239
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 240
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 241
+    throw v2
+.end method
+
+.method public start_rec()Z
+    .locals 7
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    const/4 v6, 0x0
+
+    .line 181
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v0
+
+    .line 182
+    .local v0, _data:Landroid/os/Parcel;
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v1
+
+    .line 185
+    .local v1, _reply:Landroid/os/Parcel;
+    :try_start_0
+    const-string v3, "com.voix.IRVoix"
+
+    invoke-virtual {v0, v3}, Landroid/os/Parcel;->writeInterfaceToken(Ljava/lang/String;)V
+
+    .line 186
+    iget-object v3, p0, Lcom/voix/IRVoix$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    const/4 v4, 0x4
+
+    const/4 v5, 0x0
+
+    invoke-interface {v3, v4, v0, v1, v5}, Landroid/os/IBinder;->transact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+
+    .line 187
+    invoke-virtual {v1}, Landroid/os/Parcel;->readException()V
+
+    .line 188
+    invoke-virtual {v1}, Landroid/os/Parcel;->readInt()I
+    :try_end_0
+    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+
+    move-result v3
+
+    if-eqz v3, :cond_0
+
+    const/4 v3, 0x1
+
+    move v2, v3
+
+    .line 191
+    .local v2, _result:Z
+    :goto_0
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 192
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 194
+    return v2
+
+    .end local v2           #_result:Z
+    :cond_0
+    move v2, v6
+
+    .line 188
+    goto :goto_0
+
+    .line 190
+    :catchall_0
+    move-exception v3
+
+    .line 191
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 192
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 193
+    throw v3
+.end method
+
+.method public stop_rec()Z
+    .locals 7
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    const/4 v6, 0x0
+
+    .line 198
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v0
+
+    .line 199
+    .local v0, _data:Landroid/os/Parcel;
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v1
+
+    .line 202
+    .local v1, _reply:Landroid/os/Parcel;
+    :try_start_0
+    const-string v3, "com.voix.IRVoix"
+
+    invoke-virtual {v0, v3}, Landroid/os/Parcel;->writeInterfaceToken(Ljava/lang/String;)V
+
+    .line 203
+    iget-object v3, p0, Lcom/voix/IRVoix$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    const/4 v4, 0x5
+
+    const/4 v5, 0x0
+
+    invoke-interface {v3, v4, v0, v1, v5}, Landroid/os/IBinder;->transact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+
+    .line 204
+    invoke-virtual {v1}, Landroid/os/Parcel;->readException()V
+
+    .line 205
+    invoke-virtual {v1}, Landroid/os/Parcel;->readInt()I
+    :try_end_0
+    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+
+    move-result v3
+
+    if-eqz v3, :cond_0
+
+    const/4 v3, 0x1
+
+    move v2, v3
+
+    .line 208
+    .local v2, _result:Z
+    :goto_0
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 209
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 211
+    return v2
+
+    .end local v2           #_result:Z
+    :cond_0
+    move v2, v6
+
+    .line 205
+    goto :goto_0
+
+    .line 207
+    :catchall_0
+    move-exception v3
+
+    .line 208
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 209
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 210
+    throw v3
+.end method
+
+.method public unregisterCallback(Lcom/voix/IRVoixCallback;)V
+    .locals 5
+    .parameter "c"
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    .line 245
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v0
+
+    .line 246
+    .local v0, _data:Landroid/os/Parcel;
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v1
+
+    .line 248
+    .local v1, _reply:Landroid/os/Parcel;
+    :try_start_0
+    const-string v2, "com.voix.IRVoix"
+
+    invoke-virtual {v0, v2}, Landroid/os/Parcel;->writeInterfaceToken(Ljava/lang/String;)V
+
+    .line 249
+    if-eqz p1, :cond_0
+
+    invoke-interface {p1}, Lcom/voix/IRVoixCallback;->asBinder()Landroid/os/IBinder;
+
+    move-result-object v2
+
+    :goto_0
+    invoke-virtual {v0, v2}, Landroid/os/Parcel;->writeStrongBinder(Landroid/os/IBinder;)V
+
+    .line 250
+    iget-object v2, p0, Lcom/voix/IRVoix$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    const/16 v3, 0x8
+
+    const/4 v4, 0x0
+
+    invoke-interface {v2, v3, v0, v1, v4}, Landroid/os/IBinder;->transact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+
+    .line 251
+    invoke-virtual {v1}, Landroid/os/Parcel;->readException()V
+    :try_end_0
+    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+
+    .line 254
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 255
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 257
+    return-void
+
+    .line 249
+    :cond_0
+    const/4 v2, 0x0
+
+    goto :goto_0
+
+    .line 253
+    :catchall_0
+    move-exception v2
+
+    .line 254
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 255
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 256
+    throw v2
+.end method
+
+.method public wait_confirm(I)V
+    .locals 5
+    .parameter "r"
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    .line 215
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v0
+
+    .line 216
+    .local v0, _data:Landroid/os/Parcel;
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v1
+
+    .line 218
+    .local v1, _reply:Landroid/os/Parcel;
+    :try_start_0
+    const-string v2, "com.voix.IRVoix"
+
+    invoke-virtual {v0, v2}, Landroid/os/Parcel;->writeInterfaceToken(Ljava/lang/String;)V
+
+    .line 219
+    invoke-virtual {v0, p1}, Landroid/os/Parcel;->writeInt(I)V
+
+    .line 220
+    iget-object v2, p0, Lcom/voix/IRVoix$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    const/4 v3, 0x6
+
+    const/4 v4, 0x0
+
+    invoke-interface {v2, v3, v0, v1, v4}, Landroid/os/IBinder;->transact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+
+    .line 221
+    invoke-virtual {v1}, Landroid/os/Parcel;->readException()V
+    :try_end_0
+    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+
+    .line 224
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 225
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 227
+    return-void
+
+    .line 223
+    :catchall_0
+    move-exception v2
+
+    .line 224
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    .line 225
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    .line 226
+    throw v2
+.end method
diff -Nur Phone.old//smali/com/voix/IRVoix$Stub.smali Phone//smali/com/voix/IRVoix$Stub.smali
--- Phone.old//smali/com/voix/IRVoix$Stub.smali	1970-01-01 02:00:00.000000000 +0200
+++ Phone//smali/com/voix/IRVoix$Stub.smali	2010-12-17 19:46:28.677329714 +0200
@@ -0,0 +1,419 @@
+.class public abstract Lcom/voix/IRVoix$Stub;
+.super Landroid/os/Binder;
+.source "IRVoix.java"
+
+# interfaces
+.implements Lcom/voix/IRVoix;
+
+
+# annotations
+.annotation system Ldalvik/annotation/EnclosingClass;
+    value = Lcom/voix/IRVoix;
+.end annotation
+
+.annotation system Ldalvik/annotation/InnerClass;
+    accessFlags = 0x409
+    name = "Stub"
+.end annotation
+
+.annotation system Ldalvik/annotation/MemberClasses;
+    value = {
+        Lcom/voix/IRVoix$Stub$Proxy;
+    }
+.end annotation
+
+
+# static fields
+.field private static final DESCRIPTOR:Ljava/lang/String; = "com.voix.IRVoix"
+
+.field static final TRANSACTION_call_telephony:I = 0x2
+
+.field static final TRANSACTION_force_record:I = 0x1
+
+.field static final TRANSACTION_is_recording:I = 0x3
+
+.field static final TRANSACTION_registerCallback:I = 0x7
+
+.field static final TRANSACTION_start_rec:I = 0x4
+
+.field static final TRANSACTION_stop_rec:I = 0x5
+
+.field static final TRANSACTION_unregisterCallback:I = 0x8
+
+.field static final TRANSACTION_wait_confirm:I = 0x6
+
+
+# direct methods
+.method public constructor <init>()V
+    .locals 1
+
+    .prologue
+    .line 13
+    invoke-direct {p0}, Landroid/os/Binder;-><init>()V
+
+    .line 15
+    const-string v0, "com.voix.IRVoix"
+
+    invoke-virtual {p0, p0, v0}, Lcom/voix/IRVoix$Stub;->attachInterface(Landroid/os/IInterface;Ljava/lang/String;)V
+
+    .line 16
+    return-void
+.end method
+
+.method public static asInterface(Landroid/os/IBinder;)Lcom/voix/IRVoix;
+    .locals 2
+    .parameter "obj"
+
+    .prologue
+    .line 23
+    if-nez p0, :cond_0
+
+    .line 24
+    const/4 v1, 0x0
+
+    .line 30
+    :goto_0
+    return-object v1
+
+    .line 26
+    :cond_0
+    const-string v1, "com.voix.IRVoix"
+
+    invoke-interface {p0, v1}, Landroid/os/IBinder;->queryLocalInterface(Ljava/lang/String;)Landroid/os/IInterface;
+
+    move-result-object v0
+
+    .line 27
+    .local v0, iin:Landroid/os/IInterface;
+    if-eqz v0, :cond_1
+
+    instance-of v1, v0, Lcom/voix/IRVoix;
+
+    if-eqz v1, :cond_1
+
+    .line 28
+    check-cast v0, Lcom/voix/IRVoix;
+
+    .end local v0           #iin:Landroid/os/IInterface;
+    move-object v1, v0
+
+    goto :goto_0
+
+    .line 30
+    .restart local v0       #iin:Landroid/os/IInterface;
+    :cond_1
+    new-instance v1, Lcom/voix/IRVoix$Stub$Proxy;
+
+    invoke-direct {v1, p0}, Lcom/voix/IRVoix$Stub$Proxy;-><init>(Landroid/os/IBinder;)V
+
+    goto :goto_0
+.end method
+
+
+# virtual methods
+.method public asBinder()Landroid/os/IBinder;
+    .locals 0
+
+    .prologue
+    .line 34
+    return-object p0
+.end method
+
+.method public onTransact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+    .locals 6
+    .parameter "code"
+    .parameter "data"
+    .parameter "reply"
+    .parameter "flags"
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    const/4 v5, 0x0
+
+    const/4 v3, 0x1
+
+    const-string v4, "com.voix.IRVoix"
+
+    .line 38
+    sparse-switch p1, :sswitch_data_0
+
+    .line 115
+    invoke-super {p0, p1, p2, p3, p4}, Landroid/os/Binder;->onTransact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+
+    move-result v2
+
+    :goto_0
+    return v2
+
+    .line 42
+    :sswitch_0
+    const-string v2, "com.voix.IRVoix"
+
+    invoke-virtual {p3, v4}, Landroid/os/Parcel;->writeString(Ljava/lang/String;)V
+
+    move v2, v3
+
+    .line 43
+    goto :goto_0
+
+    .line 47
+    :sswitch_1
+    const-string v2, "com.voix.IRVoix"
+
+    invoke-virtual {p2, v4}, Landroid/os/Parcel;->enforceInterface(Ljava/lang/String;)V
+
+    .line 49
+    invoke-virtual {p2}, Landroid/os/Parcel;->readInt()I
+
+    move-result v2
+
+    if-eqz v2, :cond_0
+
+    move v0, v3
+
+    .line 50
+    .local v0, _arg0:Z
+    :goto_1
+    invoke-virtual {p0, v0}, Lcom/voix/IRVoix$Stub;->force_record(Z)V
+
+    .line 51
+    invoke-virtual {p3}, Landroid/os/Parcel;->writeNoException()V
+
+    move v2, v3
+
+    .line 52
+    goto :goto_0
+
+    .end local v0           #_arg0:Z
+    :cond_0
+    move v0, v5
+
+    .line 49
+    goto :goto_1
+
+    .line 56
+    :sswitch_2
+    const-string v2, "com.voix.IRVoix"
+
+    invoke-virtual {p2, v4}, Landroid/os/Parcel;->enforceInterface(Ljava/lang/String;)V
+
+    .line 58
+    invoke-virtual {p2}, Landroid/os/Parcel;->readString()Ljava/lang/String;
+
+    move-result-object v0
+
+    .line 59
+    .local v0, _arg0:Ljava/lang/String;
+    invoke-virtual {p0, v0}, Lcom/voix/IRVoix$Stub;->call_telephony(Ljava/lang/String;)V
+
+    .line 60
+    invoke-virtual {p3}, Landroid/os/Parcel;->writeNoException()V
+
+    move v2, v3
+
+    .line 61
+    goto :goto_0
+
+    .line 65
+    .end local v0           #_arg0:Ljava/lang/String;
+    :sswitch_3
+    const-string v2, "com.voix.IRVoix"
+
+    invoke-virtual {p2, v4}, Landroid/os/Parcel;->enforceInterface(Ljava/lang/String;)V
+
+    .line 66
+    invoke-virtual {p0}, Lcom/voix/IRVoix$Stub;->is_recording()Z
+
+    move-result v1
+
+    .line 67
+    .local v1, _result:Z
+    invoke-virtual {p3}, Landroid/os/Parcel;->writeNoException()V
+
+    .line 68
+    if-eqz v1, :cond_1
+
+    move v2, v3
+
+    :goto_2
+    invoke-virtual {p3, v2}, Landroid/os/Parcel;->writeInt(I)V
+
+    move v2, v3
+
+    .line 69
+    goto :goto_0
+
+    :cond_1
+    move v2, v5
+
+    .line 68
+    goto :goto_2
+
+    .line 73
+    .end local v1           #_result:Z
+    :sswitch_4
+    const-string v2, "com.voix.IRVoix"
+
+    invoke-virtual {p2, v4}, Landroid/os/Parcel;->enforceInterface(Ljava/lang/String;)V
+
+    .line 74
+    invoke-virtual {p0}, Lcom/voix/IRVoix$Stub;->start_rec()Z
+
+    move-result v1
+
+    .line 75
+    .restart local v1       #_result:Z
+    invoke-virtual {p3}, Landroid/os/Parcel;->writeNoException()V
+
+    .line 76
+    if-eqz v1, :cond_2
+
+    move v2, v3
+
+    :goto_3
+    invoke-virtual {p3, v2}, Landroid/os/Parcel;->writeInt(I)V
+
+    move v2, v3
+
+    .line 77
+    goto :goto_0
+
+    :cond_2
+    move v2, v5
+
+    .line 76
+    goto :goto_3
+
+    .line 81
+    .end local v1           #_result:Z
+    :sswitch_5
+    const-string v2, "com.voix.IRVoix"
+
+    invoke-virtual {p2, v4}, Landroid/os/Parcel;->enforceInterface(Ljava/lang/String;)V
+
+    .line 82
+    invoke-virtual {p0}, Lcom/voix/IRVoix$Stub;->stop_rec()Z
+
+    move-result v1
+
+    .line 83
+    .restart local v1       #_result:Z
+    invoke-virtual {p3}, Landroid/os/Parcel;->writeNoException()V
+
+    .line 84
+    if-eqz v1, :cond_3
+
+    move v2, v3
+
+    :goto_4
+    invoke-virtual {p3, v2}, Landroid/os/Parcel;->writeInt(I)V
+
+    move v2, v3
+
+    .line 85
+    goto :goto_0
+
+    :cond_3
+    move v2, v5
+
+    .line 84
+    goto :goto_4
+
+    .line 89
+    .end local v1           #_result:Z
+    :sswitch_6
+    const-string v2, "com.voix.IRVoix"
+
+    invoke-virtual {p2, v4}, Landroid/os/Parcel;->enforceInterface(Ljava/lang/String;)V
+
+    .line 91
+    invoke-virtual {p2}, Landroid/os/Parcel;->readInt()I
+
+    move-result v0
+
+    .line 92
+    .local v0, _arg0:I
+    invoke-virtual {p0, v0}, Lcom/voix/IRVoix$Stub;->wait_confirm(I)V
+
+    .line 93
+    invoke-virtual {p3}, Landroid/os/Parcel;->writeNoException()V
+
+    move v2, v3
+
+    .line 94
+    goto/16 :goto_0
+
+    .line 98
+    .end local v0           #_arg0:I
+    :sswitch_7
+    const-string v2, "com.voix.IRVoix"
+
+    invoke-virtual {p2, v4}, Landroid/os/Parcel;->enforceInterface(Ljava/lang/String;)V
+
+    .line 100
+    invoke-virtual {p2}, Landroid/os/Parcel;->readStrongBinder()Landroid/os/IBinder;
+
+    move-result-object v2
+
+    invoke-static {v2}, Lcom/voix/IRVoixCallback$Stub;->asInterface(Landroid/os/IBinder;)Lcom/voix/IRVoixCallback;
+
+    move-result-object v0
+
+    .line 101
+    .local v0, _arg0:Lcom/voix/IRVoixCallback;
+    invoke-virtual {p0, v0}, Lcom/voix/IRVoix$Stub;->registerCallback(Lcom/voix/IRVoixCallback;)V
+
+    .line 102
+    invoke-virtual {p3}, Landroid/os/Parcel;->writeNoException()V
+
+    move v2, v3
+
+    .line 103
+    goto/16 :goto_0
+
+    .line 107
+    .end local v0           #_arg0:Lcom/voix/IRVoixCallback;
+    :sswitch_8
+    const-string v2, "com.voix.IRVoix"
+
+    invoke-virtual {p2, v4}, Landroid/os/Parcel;->enforceInterface(Ljava/lang/String;)V
+
+    .line 109
+    invoke-virtual {p2}, Landroid/os/Parcel;->readStrongBinder()Landroid/os/IBinder;
+
+    move-result-object v2
+
+    invoke-static {v2}, Lcom/voix/IRVoixCallback$Stub;->asInterface(Landroid/os/IBinder;)Lcom/voix/IRVoixCallback;
+
+    move-result-object v0
+
+    .line 110
+    .restart local v0       #_arg0:Lcom/voix/IRVoixCallback;
+    invoke-virtual {p0, v0}, Lcom/voix/IRVoix$Stub;->unregisterCallback(Lcom/voix/IRVoixCallback;)V
+
+    .line 111
+    invoke-virtual {p3}, Landroid/os/Parcel;->writeNoException()V
+
+    move v2, v3
+
+    .line 112
+    goto/16 :goto_0
+
+    .line 38
+    :sswitch_data_0
+    .sparse-switch
+        0x1 -> :sswitch_1
+        0x2 -> :sswitch_2
+        0x3 -> :sswitch_3
+        0x4 -> :sswitch_4
+        0x5 -> :sswitch_5
+        0x6 -> :sswitch_6
+        0x7 -> :sswitch_7
+        0x8 -> :sswitch_8
+        0x5f4e5446 -> :sswitch_0
+    .end sparse-switch
+.end method
